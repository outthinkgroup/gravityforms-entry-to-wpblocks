(()=>{"use strict";var e,t={896:()=>{const e=window.wp.blocks,t=window.wp.element;window.wp.i18n;const n=window.wp.blockEditor,o=JSON.parse('{"u2":"outthink/gfentry-to-block","TN":"GF Entry To Blocks"}'),a=window.wp.compose,r=window.wp.components;(0,e.registerBlockType)(o.u2,{edit:function(e){const{clientId:n}=e,[l,c]=(0,t.useState)([]),[i,s]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async function(){const{url:e}=window.wp.ajax.settings;return fetch(`${e}?action=gfetc_forms`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}).then((e=>e.json()))})().then((e=>{c(e)}))}),[c]);const[u,p]=(0,t.useState)([]),[d,w]=(0,t.useState)(!1);async function f(e,t){w(!0);const n=await async function(e,t){const{url:n}=window.wp.ajax.settings,o={query:e,limit:10};t&&(o.form_id=t);return await fetch(`${n}?action=gfetc_get_stars`,{credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(o),method:"POST"}).then((e=>e.json()))}(e,t);return w(!1),n}const[h,m]=(0,t.useState)(null),[v,g]=(0,t.useState)(void 0),[y,b]=(0,t.useState)(!1);return(0,t.createElement)("div",{className:"wp-block-gfetc-wrapper"},(0,t.createElement)("div",{class:"wp-block-gfetc"},(0,t.createElement)("h4",{className:"wp-block-gfetc__title"},o.TN),l.length?(0,t.createElement)("div",{className:"select-wrapper"},(0,t.createElement)(r.SelectControl,{label:"Choose a Form",value:i,onChange:async e=>{s(e),await f(void 0,l[e]?.id).then(p)}},(0,t.createElement)("option",{value:null},"Select a form"),l.map(((e,n)=>(0,t.createElement)("option",{key:e.id,value:n},e.title))))):(0,t.createElement)("p",null,"Loading..."),null!=i?(0,t.createElement)("div",{className:"select-wrapper"},(0,t.createElement)(r.ComboboxControl,{label:"Choose a star",value:h,onChange:async e=>{m(e),b(!0);const t=await async function(e){const{url:t}=window.wp.ajax.settings,n={entry_id:e};return await fetch(`${t}?action=gfetc_gf_entry`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>e.json()))}(parseInt(u[e].forms[l[i].id]));b(!1),g(t)},onFilterValueChange:e=>{(0,a.debounce)((()=>{if(e.length>=3)return f(e,l[i]?.id).then(p)}),400)()},options:u.map(((e,t)=>({value:t,label:e.email})))}),d?(0,t.createElement)("p",null,"Loading more..."):null):null,v||y?(0,t.createElement)("div",null,(0,t.createElement)(r.Button,{disabled:y,variant:"primary",style:{color:"white"},onClick:function(){const e=l[i].fields.map((e=>{const t=v[e.id];return{question:e.label,answer:t}}));!function(e,t){wp.data.dispatch("core/editor").replaceBlock(e,t.reduce(((e,t)=>{let{question:n,answer:o}=t;return e.push(wp.blocks.createBlock("core/heading",{content:n,level:3})),e.push(wp.blocks.createBlock("core/paragraph",{content:o})),e}),[]))}(n,e)}},y?"Loading Entry...":"Convert to Blocks")):null))},save:function(){return(0,t.createElement)("p",n.useBlockProps.save())}})}},n={};function o(e){var a=n[e];if(void 0!==a)return a.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,o),r.exports}o.m=t,e=[],o.O=(t,n,a,r)=>{if(!n){var l=1/0;for(u=0;u<e.length;u++){for(var[n,a,r]=e[u],c=!0,i=0;i<n.length;i++)(!1&r||l>=r)&&Object.keys(o.O).every((e=>o.O[e](n[i])))?n.splice(i--,1):(c=!1,r<l&&(l=r));if(c){e.splice(u--,1);var s=a();void 0!==s&&(t=s)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,a,r]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={826:0,431:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var a,r,[l,c,i]=n,s=0;if(l.some((t=>0!==e[t]))){for(a in c)o.o(c,a)&&(o.m[a]=c[a]);if(i)var u=i(o)}for(t&&t(n);s<l.length;s++)r=l[s],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(u)},n=globalThis.webpackChunktodo_list=globalThis.webpackChunktodo_list||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=o.O(void 0,[431],(()=>o(896)));a=o.O(a)})();